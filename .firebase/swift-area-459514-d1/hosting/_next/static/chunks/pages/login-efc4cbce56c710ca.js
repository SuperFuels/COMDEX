(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{2982:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(7876),l=t(4232),r=t(870),n=t(9099);function u(){let e=(0,n.useRouter)(),[a,t]=(0,l.useState)(""),[u,d]=(0,l.useState)(""),[o,i]=(0,l.useState)(!1),[c,p]=(0,l.useState)(""),h=async t=>{t.preventDefault(),i(!0),p("");try{let t=new URLSearchParams;t.append("email",a),t.append("password",u);let{data:s}=await r.A.post("/auth/login",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});localStorage.setItem("token",s.access_token);let l=(await r.A.get("/auth/role")).data.role;"admin"===l?e.push("/admin/dashboard"):"supplier"===l?e.push("/dashboard"):"buyer"===l?e.push("/buyer/dashboard"):e.push("/")}catch(a){var s,l;let e=null==(l=a.response)||null==(s=l.data)?void 0:s.detail;e?p(Array.isArray(e)?e.map(e=>e.msg).join(", "):e):p("Login failed. Please try again.")}finally{i(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("form",{onSubmit:h,className:"bg-white p-6 rounded shadow-md w-full max-w-sm",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Login"}),c&&(0,s.jsx)("p",{className:"text-red-500 mb-4 text-sm text-center",children:c}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:a,onChange:e=>t(e.target.value),required:!0,className:"border p-2 w-full mb-4 rounded"}),(0,s.jsx)("input",{type:"password",placeholder:"Password",value:u,onChange:e=>d(e.target.value),required:!0,className:"border p-2 w-full mb-4 rounded"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"w-full py-2 rounded text-white ".concat(o?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"),children:o?"Logging in...":"Login"})]})})}},7984:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(2982)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(7984)),_N_E=e.O()}]);