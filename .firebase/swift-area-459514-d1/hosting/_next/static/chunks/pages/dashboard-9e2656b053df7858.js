(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var l=t(7876),a=t(4232),r=t(8230),c=t.n(r),d=t(6972),n=t(870);function i(){(0,d.A)("supplier");let[e,s]=(0,a.useState)([]),[t,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await n.A.get("/products/me");s(e.data)}catch(e){console.error("❌ Failed to fetch products",e),o("Unable to load your products.")}finally{r(!1)}})()},[]);let x=e.length;return t?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)("p",{className:"text-gray-600",children:"Loading dashboard…"})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("main",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"My business"}),(0,l.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",0]}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Today's sales"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Products"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:x}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Active listings"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Inventory"}),(0,l.jsxs)("p",{className:"text-2xl font-bold",children:[0,"/",0]}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Stock / capacity"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Orders"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:0}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Open orders"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Payments"}),(0,l.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",0]}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Proceeds (30d)"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Customers"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:0}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Feedback rating"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Sales Over Time"}),(0,l.jsx)("div",{className:"h-48 bg-gray-100 flex items-center justify-center text-gray-400",children:"Chart placeholder"})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Orders Over Time"}),(0,l.jsx)("div",{className:"h-48 bg-gray-100 flex items-center justify-center text-gray-400",children:"Chart placeholder"})]})]}),(0,l.jsx)("div",{className:"text-right",children:(0,l.jsx)(c(),{href:"/products/new",prefetch:!1,className:"inline-block bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"+ Sell Product"})})]})})}},6972:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var l=t(4232),a=t(9099),r=t(870);function c(e){let s=(0,a.useRouter)();(0,l.useEffect)(()=>{console.log("[useAuthRedirect] \uD83D\uDD0D running for route:",s.pathname);let t=localStorage.getItem("token");if(console.log("[useAuthRedirect] token:",t),!t){console.log("[useAuthRedirect] ➡️ no token, redirect to /login"),s.replace("/login");return}r.A.get("/auth/role").then(t=>{console.log("[useAuthRedirect] /auth/role →",t.status,t.data);let l=t.data.role;console.log("[useAuthRedirect] userRole:",l,"requiredRole:",e),e&&l!==e?(console.log("[useAuthRedirect] ➡️ role mismatch (have=".concat(l," need=").concat(e,"), redirect to /login")),s.replace("/login")):console.log("[useAuthRedirect] ✅ role ok, staying on page")}).catch(e=>{console.error("[useAuthRedirect] ❌ error fetching role",e),s.replace("/login")})},[e,s])}},7580:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(753)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(7580)),_N_E=e.O()}]);