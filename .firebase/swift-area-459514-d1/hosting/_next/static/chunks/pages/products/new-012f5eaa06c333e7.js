(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{5488:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var o=t(7876),a=t(4232),l=t(870),n=t(9099),u=t(6972);function c(){(0,u.A)("supplier");let e=(0,n.useRouter)(),[r,t]=(0,a.useState)({title:"",description:"",price_per_kg:"",origin_country:"",category:""}),[c,s]=(0,a.useState)(null),i=e=>{t({...r,[e.target.name]:e.target.value})},d=async t=>{t.preventDefault();let o=localStorage.getItem("token"),a=new FormData;Object.entries(r).forEach(e=>{let[r,t]=e;a.append(r,t)}),c&&a.append("image",c);try{await l.A.post("http://localhost:8000/products/create",a,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}}),e.push("/supplier/dashboard")}catch(e){console.error(e),alert("❌ Failed to create product")}};return(0,o.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:(0,o.jsxs)("form",{onSubmit:d,className:"bg-white p-6 rounded shadow-md w-full max-w-lg space-y-4",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-center mb-2",children:"\uD83D\uDCE6 New Product"}),(0,o.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:r.title,onChange:i,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,o.jsx)("textarea",{name:"description",placeholder:"Description",value:r.description,onChange:i,className:"w-full border border-gray-300 rounded p-2",rows:3,required:!0}),(0,o.jsx)("input",{type:"number",name:"price_per_kg",placeholder:"Price per kg (USD)",value:r.price_per_kg,onChange:i,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,o.jsx)("input",{type:"text",name:"origin_country",placeholder:"Country of Origin",value:r.origin_country,onChange:i,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,o.jsx)("input",{type:"text",name:"category",placeholder:"Category (e.g. Protein, Cocoa)",value:r.category,onChange:i,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&s(e.target.files[0])},className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,o.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Submit Product"})]})})}},6972:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var o=t(4232),a=t(9099),l=t(870);function n(e){let r=(0,a.useRouter)();(0,o.useEffect)(()=>{console.log("[useAuthRedirect] \uD83D\uDD0D running for route:",r.pathname);let t=localStorage.getItem("token");if(console.log("[useAuthRedirect] token:",t),!t){console.log("[useAuthRedirect] ➡️ no token, redirect to /login"),r.replace("/login");return}l.A.get("/auth/role").then(t=>{console.log("[useAuthRedirect] /auth/role →",t.status,t.data);let o=t.data.role;console.log("[useAuthRedirect] userRole:",o,"requiredRole:",e),e&&o!==e?(console.log("[useAuthRedirect] ➡️ role mismatch (have=".concat(o," need=").concat(e,"), redirect to /login")),r.replace("/login")):console.log("[useAuthRedirect] ✅ role ok, staying on page")}).catch(e=>{console.error("[useAuthRedirect] ❌ error fetching role",e),r.replace("/login")})},[e,r])}},9326:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/new",function(){return t(5488)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(9326)),_N_E=e.O()}]);