(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{4062:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});var t=a(7876),n=a(4232),o=a(9099),i=a(870),l=a(9765);function s(){let e=(0,o.useRouter)(),[r,a]=(0,n.useState)({title:"",origin_country:"",category:"",description:"",price_per_kg:"",image:null}),[s,p]=(0,n.useState)(""),[d,u]=(0,n.useState)("");(0,n.useEffect)(()=>{let r=localStorage.getItem("token");if(!r)return void e.push("/login");u(r),axios.get("http://localhost:8000/auth/role",{headers:{Authorization:"Bearer ".concat(r)}}).then(r=>{"supplier"!==r.data.role&&e.push("/")}).catch(()=>{e.push("/")})},[e]);let c=e=>{let{name:t,value:n,files:o}=e.target;"image"===t&&o?a({...r,image:o[0]}):a({...r,[t]:n})},g=async a=>{a.preventDefault(),p("");let t=new FormData;t.append("title",r.title),t.append("origin_country",r.origin_country),t.append("category",r.category),t.append("description",r.description),t.append("price_per_kg",r.price_per_kg),r.image&&t.append("image",r.image);try{await i.A.post("http://localhost:8000/products/create",t,{headers:{Authorization:"Bearer ".concat(d),"Content-Type":"multipart/form-data"}}),e.push("/dashboard")}catch(e){var n,o;p((null==(o=e.response)||null==(n=o.data)?void 0:n.detail)||"âŒ Upload failed.")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(l.A,{}),(0,t.jsxs)("main",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Upload New Product"}),s&&(0,t.jsx)("p",{className:"text-red-600 mb-2",children:s}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsx)("input",{name:"title",placeholder:"Title",onChange:c,className:"w-full border border-gray-300 p-2 rounded",required:!0}),(0,t.jsx)("input",{name:"origin_country",placeholder:"Country of Origin",onChange:c,className:"w-full border border-gray-300 p-2 rounded",required:!0}),(0,t.jsx)("input",{name:"category",placeholder:"Category (e.g. whey)",onChange:c,className:"w-full border border-gray-300 p-2 rounded",required:!0}),(0,t.jsx)("input",{name:"description",placeholder:"Description",onChange:c,className:"w-full border border-gray-300 p-2 rounded",required:!0}),(0,t.jsx)("input",{name:"price_per_kg",type:"number",step:"0.01",placeholder:"Price per KG",onChange:c,className:"w-full border border-gray-300 p-2 rounded",required:!0}),(0,t.jsx)("input",{name:"image",type:"file",accept:"image/*",onChange:c,className:"w-full",required:!0}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Upload"})]})]})]})}},9576:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/create",function(){return a(4062)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(9576)),_N_E=e.O()}]);