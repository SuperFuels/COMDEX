(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{101:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var l=t(7876),a=t(4232),r=t(6972),c=t(870);function d(){(0,r.A)("admin");let[e,s]=(0,a.useState)(null),[t,d]=(0,a.useState)(null),[i,n]=(0,a.useState)(null),[h,x]=(0,a.useState)(null);return((0,a.useEffect)(()=>{!async function(){try{let[e,t,l]=await Promise.all([c.A.get("/admin/users"),c.A.get("/admin/products"),c.A.get("/admin/deals")]);s(e.data),d(t.data),n(l.data)}catch(e){console.error("❌ Error fetching admin data:",e),x("Unauthorized or failed to load admin data.")}}()},[]),e&&t&&i)?(0,l.jsxs)("main",{className:"pt-6 px-6 pb-6 max-w-6xl mx-auto space-y-10",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"\uD83D\uDEE0️ Admin Dashboard"}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDC65 All Users"}),(0,l.jsx)("div",{className:"bg-white shadow p-4 rounded overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-left p-2",children:"Name"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Email"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Role"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2",children:e.name}),(0,l.jsx)("td",{className:"p-2",children:e.email}),(0,l.jsx)("td",{className:"p-2 capitalize",children:e.role})]},e.id))})]})})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDCE6 All Products"}),(0,l.jsx)("div",{className:"bg-white shadow p-4 rounded overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-left p-2",children:"Title"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Country"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Category"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Owner"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2",children:e.title}),(0,l.jsx)("td",{className:"p-2",children:e.origin_country}),(0,l.jsx)("td",{className:"p-2",children:e.category}),(0,l.jsx)("td",{className:"p-2",children:e.owner_email})]},e.id))})]})})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83E\uDD1D All Deals"}),(0,l.jsx)("div",{className:"bg-white shadow p-4 rounded overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-left p-2",children:"Product"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Buyer"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Supplier"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Quantity (kg)"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Total Price"})]})}),(0,l.jsx)("tbody",{children:i.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2",children:e.product_title}),(0,l.jsx)("td",{className:"p-2",children:e.buyer_email}),(0,l.jsx)("td",{className:"p-2",children:e.supplier_email}),(0,l.jsx)("td",{className:"p-2",children:e.quantity_kg}),(0,l.jsx)("td",{className:"p-2",children:e.total_price})]},e.id))})]})})]})]}):(0,l.jsx)("main",{className:"pt-6 px-6 pb-6 max-w-4xl mx-auto text-center",children:h?(0,l.jsx)("p",{className:"text-red-500",children:h}):(0,l.jsx)("p",{children:"Loading admin dashboard…"})})}},4572:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(101)}])},6972:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var l=t(4232),a=t(9099),r=t(870),c=t(5322);let d=["/login","/register"];function i(e){let s=(0,a.useRouter)(),{pathname:t}=s;(0,l.useEffect)(()=>{let l=(0,c.gf)();if(!l){d.includes(t)||s.replace("/login");return}r.A.defaults.headers.common.Authorization="Bearer ".concat(l),r.A.get("/auth/profile").then(l=>{let{data:a}=l,r=a.role;if(d.includes(t))switch(r){case"supplier":return s.replace("/supplier/dashboard");case"buyer":return s.replace("/buyer/dashboard");case"admin":return s.replace("/admin/dashboard")}if(e&&r!==e)return s.replace("/login")}).catch(e=>{console.error("[useAuthRedirect] token validation failed",e),(0,c.ri)(),s.replace("/login")})},[t,e,s])}},9099:(e,s,t)=>{e.exports=t(8253)}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(4572)),_N_E=e.O()}]);