(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{1548:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/supplier/inventory/edit/[id]",function(){return r(9201)}])},9099:(e,t,r)=>{e.exports=r(8253)},9201:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(7876),a=r(9099),i=r(4232),l=r(870);function o(){let e=(0,a.useRouter)(),{id:t}=e.query,[r,o]=(0,i.useState)(null),[c,s]=(0,i.useState)({title:"",description:"",price_per_kg:"",origin_country:"",category:""}),[u,p]=(0,i.useState)(!0),[d,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{t&&(p(!0),l.A.get("/products/".concat(t)).then(e=>{let{data:t}=e;o(t),s({title:t.title,description:t.description||"",price_per_kg:String(t.price_per_kg),origin_country:t.origin_country||"",category:t.category||""})}).catch(()=>g("Failed to load product")).finally(()=>p(!1)))},[t]);let _=e=>{s(t=>({...t,[e.target.name]:e.target.value}))},h=async r=>{if(r.preventDefault(),t){g(null);try{await l.A.put("/products/".concat(t),{title:c.title,description:c.description,price_per_kg:parseFloat(c.price_per_kg),origin_country:c.origin_country,category:c.category}),e.push("/supplier/inventory")}catch(e){var n,a;g((null==(a=e.response)||null==(n=a.data)?void 0:n.detail)||"Failed to update product")}}};return u?(0,n.jsx)("p",{className:"p-8 text-center",children:"Loadingâ€¦"}):d?(0,n.jsx)("p",{className:"p-8 text-center text-red-600",children:d}):r?(0,n.jsx)("main",{className:"flex-1 bg-bg-page px-4 pt-0",children:(0,n.jsxs)("div",{className:"max-w-lg mx-auto py-6",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold mb-4",children:["Edit Product #",r.id]}),(0,n.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,n.jsx)("input",{name:"title",value:c.title,onChange:_,placeholder:"Title",required:!0,className:"w-full p-2 border rounded"}),(0,n.jsx)("textarea",{name:"description",value:c.description,onChange:_,placeholder:"Description",className:"w-full p-2 border rounded"}),(0,n.jsx)("input",{name:"price_per_kg",type:"number",step:"0.01",value:c.price_per_kg,onChange:_,placeholder:"Price per kg",required:!0,className:"w-full p-2 border rounded"}),(0,n.jsx)("input",{name:"origin_country",value:c.origin_country,onChange:_,placeholder:"Origin country",className:"w-full p-2 border rounded"}),(0,n.jsx)("input",{name:"category",value:c.category,onChange:_,placeholder:"Category",className:"w-full p-2 border rounded"}),(0,n.jsx)("button",{type:"submit",className:"w-full py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save Changes"})]})]})}):(0,n.jsx)("p",{className:"p-8 text-center",children:"Product not found"})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(1548)),_N_E=e.O()}]);