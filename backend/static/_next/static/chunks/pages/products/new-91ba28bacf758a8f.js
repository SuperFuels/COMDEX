(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{5488:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(7876),l=t(4232),n=t(870),o=t(9099),u=t(6972);function i(){(0,u.A)("supplier");let e=(0,o.useRouter)(),[r,t]=(0,l.useState)({title:"",description:"",price_per_kg:"",origin_country:"",category:""}),[i,s]=(0,l.useState)(null),c=e=>{t(r=>({...r,[e.target.name]:e.target.value}))},d=async t=>{t.preventDefault();let a=new FormData;Object.entries(r).forEach(e=>{let[r,t]=e;a.append(r,t)}),i&&a.append("image",i);try{await n.A.post("/products",a),e.push("/supplier/dashboard")}catch(e){console.error(e),alert("âŒ Failed to create product")}};return(0,a.jsx)("main",{className:"bg-gray-100 flex-1 flex items-center justify-center px-4 pt-0",children:(0,a.jsxs)("form",{onSubmit:d,className:"bg-white p-6 rounded shadow-md w-full max-w-lg space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-2",children:"\uD83D\uDCE6 New Product"}),(0,a.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:r.title,onChange:c,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,a.jsx)("textarea",{name:"description",placeholder:"Description",value:r.description,onChange:c,className:"w-full border border-gray-300 rounded p-2",rows:3,required:!0}),(0,a.jsx)("input",{type:"number",name:"price_per_kg",placeholder:"Price per kg (USD)",value:r.price_per_kg,onChange:c,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,a.jsx)("input",{type:"text",name:"origin_country",placeholder:"Country of Origin",value:r.origin_country,onChange:c,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,a.jsx)("input",{type:"text",name:"category",placeholder:"Category (e.g. Protein, Cocoa)",value:r.category,onChange:c,className:"w-full border border-gray-300 rounded p-2",required:!0}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&s(e.target.files[0])},className:"w-full",required:!0}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Submit Product"})]})})}},6972:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var a=t(4232),l=t(9099),n=t(870),o=t(5322);let u=["/login","/register"];function i(e){let r=(0,l.useRouter)(),{pathname:t}=r;(0,a.useEffect)(()=>{let a=(0,o.gf)();if(!a){u.includes(t)||r.replace("/login");return}n.A.defaults.headers.common.Authorization="Bearer ".concat(a),n.A.get("/auth/profile").then(a=>{let{data:l}=a,n=l.role;if(u.includes(t))switch(n){case"supplier":return r.replace("/supplier/dashboard");case"buyer":return r.replace("/buyer/dashboard");case"admin":return r.replace("/admin/dashboard")}if(e&&n!==e)return r.replace("/login")}).catch(e=>{console.error("[useAuthRedirect] token validation failed",e),(0,o.ri)(),r.replace("/login")})},[t,e,r])}},9099:(e,r,t)=>{e.exports=t(8253)},9326:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/new",function(){return t(5488)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(9326)),_N_E=e.O()}]);