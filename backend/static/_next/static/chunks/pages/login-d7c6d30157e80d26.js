(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{2982:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(7876),r=a(4232),n=a(9099),l=a(8230),o=a.n(l),u=a(870);function i(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),[h,m]=(0,r.useState)(""),p=async a=>{a.preventDefault(),c(!0),m("");try{let{data:a}=await u.A.post("/auth/login",{email:t,password:l},{headers:{"Content-Type":"application/json"}});localStorage.setItem("token",a.token),u.A.defaults.headers.common.Authorization="Bearer ".concat(a.token),"admin"===a.role?e.push("/admin/dashboard"):"supplier"===a.role?e.push("/supplier/dashboard"):"buyer"===a.role?e.push("/buyer/dashboard"):e.push("/")}catch(t){var s,r;let e=null==(r=t.response)||null==(s=r.data)?void 0:s.detail;m(e?Array.isArray(e)?e.map(e=>e.msg).join(", "):e:"Login failed. Please try again.")}finally{c(!1)}};return(0,s.jsx)("main",{className:"mt-[-4rem] pt-0",children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("form",{onSubmit:p,className:"bg-white p-6 rounded shadow-md w-full max-w-sm",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Login"}),h&&(0,s.jsx)("p",{className:"text-red-500 mb-4 text-sm text-center",children:h}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:t,onChange:e=>a(e.target.value),required:!0,className:"border p-2 w-full mb-4 rounded"}),(0,s.jsx)("input",{type:"password",placeholder:"Password",value:l,onChange:e=>i(e.target.value),required:!0,className:"border p-2 w-full mb-4 rounded"}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full py-2 rounded text-white ".concat(d?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"),children:d?"Logging in…":"Login"}),(0,s.jsxs)("p",{className:"mt-4 text-center text-sm",children:["Don’t have an account?"," ",(0,s.jsx)(o(),{href:"/register",className:"text-blue-600 hover:underline",children:"Register here"})]})]})})})}},7984:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(2982)}])},9099:(e,t,a)=>{e.exports=a(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7984)),_N_E=e.O()}]);